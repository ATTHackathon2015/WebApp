<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.0/css/materialize.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

<style type="text/css">
    div#googleMap {
        margin: 0 auto 0 auto;
    }
</style>
<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.96.1/js/materialize.min.js"></script>
<script src="http://maps.googleapis.com/maps/api/js"></script>
<script>

var lat;
var long;
var acc;
var map;
var markers = [];
var marker_index;
var marker_type;
var pinImage;

navigator.geolocation.getCurrentPosition(GetLocation);
function GetLocation(location) {
    lat = location.coords.latitude;
    long = location.coords.longitude;
    acc = location.coords.accuracy;
}
function initialize() {
    marker_index = 0;
    marker_type = 0;
    var mapProp = {
        center:new google.maps.LatLng(lat,long),
        zoom:17,
        mapTypeId:google.maps.MapTypeId.ROADMAP
    };
    map=new google.maps.Map(document.getElementById("googleMap"), mapProp);
    map.addListener('click', function(event) {
        placeMarker(event.latLng);
    });

}
function placeMarker(location) {
    if (marker_type != 0) {
        var marker = new google.maps.Marker({
          position: location,
          icon: pinImage,
          map: map,
        });
        var infowindow = new google.maps.InfoWindow({
          content: document.getElementById("item_name").value + '<br>' + location.lat() +
          '<br>Longitude: ' + location.lng()
        });
        infowindow.open(map,marker);
        markers[marker_index] = marker;
        marker_index = marker_index + 1;
    }

}

function setMarkerType(val) {
    // document.getElementById("title").innerHTML = "Lost";
    if (val == "Lost") {
        marker_type = 1;
        pinImage = new google.maps.MarkerImage('http://maps.google.com/mapfiles/ms/icons/red-dot.png');
        document.getElementById("title").innerHTML = "Lost";
    } else if (val == "Found") {
        marker_type = 2;
        pinImage = new google.maps.MarkerImage('http://maps.google.com/mapfiles/ms/icons/green-dot.png');
        document.getElementById("title").innerHTML = "Found";
    } else {
        marker_type = 0;
    }
}


google.maps.event.addDomListener(window, 'load', initialize);

$(document).ready(function() {
   $('select').material_select({});
 });

// $(document).ready(function(){
//       // Dropdown
//       $('.dropdown-button').dropdown({
//            inDuration: 300,
//            outDuration: 225,
//            constrain_width: true, // Does not change width of dropdown to that of the activator
//            hover: true, // Activate on hover
//            gutter: 0, // Spacing from edge
//            belowOrigin: true // Displays dropdown below the button
//            }
//       );
//     });

</script>
</head>
<body style="background-color: rgb(102, 204, 255)">
    <h1 id="title">Lost and Found</h1>
    <div class="row">
        <div class="col s12 m6" style="width:10%">
          <div class="card blue-grey darken-1">
            <div class="card-content white-text">
              <span class="card-title">Add Item</span>
            </div>
        </div>
    </div>
</div>
    <div class="row">
        <form class="col s12" style="width:10%">
            <div class="row">
                <div class="input-field col s12">
                    <input placeholder="Placeholder" id="item_name" type="text" class="validate">
                    <label for="item_name">Item name</label>
                </div>
            </div>
            <div class="row">
                <div class="row">
                    <div class="input-field col s12">
                        <textarea id="description" class="materialize-textarea"></textarea>
                        <label for="description">Description</label>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="input-field col s12">
                    <input id="phone" type="tel" class="validate">
                    <label for="phone">Phone</label>
                </div>
            </div>
        </form>
    </div>

    <div class="input-field col s12" style="width:10%">
       <select style="margin-left:5px" onchange="setMarkerType(this.value)" class="browser-default">
         <option value="" disabled selected>Choose your option</option>
         <option value="Lost">Lost</option>
         <option value="Found">Found</option>
       </select>
     </div>
    <!-- Dropdown Trigger -->
<!-- <a class='dropdown-button btn' id="Lostandfound" href='#' data-activates='dropdown1'>Lost or Found</a> -->

<!-- Dropdown Structure -->
<!-- <ul id='dropdown1' class='dropdown-content'>
    <li><a onclick="setLostorFound()" href='#!'>Lost or Found</a></li>
    <li class="divider"></li>
    <li><a onclick="setLost()" href="#!">Lost</a></li>
    <li><a onclick="setFound()" href="#!">Found</a></li>
</ul> -->

    <!-- <select onchange="setMarkerType(this.value)">
        <option value="addnew">Select lost or found</option>
        <option value="lost">Lost item</option>
        <option value="found">Found item</option>
    <select> -->

<div id="googleMap" style="margin-top:-450px;width:75%;height:700px;"></div>

</body>

</html>
